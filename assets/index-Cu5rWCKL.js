(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const I=Math.sqrt(3),C=.5*(I-1),S=(3-I)/6,E=h=>Math.floor(h)|0,A=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]);function G(h=Math.random){const e=q(h),o=new Float64Array(e).map(n=>A[n%12*2]),t=new Float64Array(e).map(n=>A[n%12*2+1]);return function(s,i){let u=0,m=0,b=0;const p=(s+i)*C,x=E(s+p),c=E(i+p),r=(x+c)*S,W=x-r,N=c-r,g=s-W,d=i-N;let R,z;g>d?(R=1,z=0):(R=0,z=1);const M=g-R+S,O=d-z+S,w=g-1+2*S,l=d-1+2*S,v=x&255,T=c&255;let a=.5-g*g-d*d;if(a>=0){const f=v+e[T],F=o[f],P=t[f];a*=a,u=a*a*(F*g+P*d)}let y=.5-M*M-O*O;if(y>=0){const f=v+R+e[T+z],F=o[f],P=t[f];y*=y,m=y*y*(F*M+P*O)}let L=.5-w*w-l*l;if(L>=0){const f=v+1+e[T+1],F=o[f],P=t[f];L*=L,b=L*L*(F*w+P*l)}return 70*(u+m+b)}}function q(h){const o=new Uint8Array(512);for(let t=0;t<512/2;t++)o[t]=t;for(let t=0;t<512/2-1;t++){const n=t+~~(h()*(256-t)),s=o[t];o[t]=o[n],o[n]=s}for(let t=256;t<512;t++)o[t]=o[t-256];return o}class D{constructor(e,o=256){this.canvas=e,this.ctx=e.getContext("2d"),this.size=o,this.canvas.width=o,this.canvas.height=o,this.landTypes={deepOcean:{color:"#1a1a3a",heightRange:[0,.3],noiseScale:.8,noiseWeight:.3},shallowOcean:{color:"#2a2a5a",heightRange:[.3,.5],noiseScale:.6,noiseWeight:.4},beach:{color:"#e6b873",heightRange:[.5,.6],noiseScale:.4,noiseWeight:.5},plains:{color:"#4d8c57",heightRange:[.6,.7],noiseScale:.3,noiseWeight:.6},hills:{color:"#6d9c67",heightRange:[.7,.8],noiseScale:.2,noiseWeight:.7},mountains:{color:"#8c6d4d",heightRange:[.8,.9],noiseScale:.15,noiseWeight:.8},snowPeaks:{color:"#f5f5f5",heightRange:[.9,1],noiseScale:.1,noiseWeight:.9}}}getLandType(e){for(const[o,t]of Object.entries(this.landTypes))if(e>=t.heightRange[0]&&e<t.heightRange[1])return{type:o,...t};return null}generate(e=.5){const o=G(),t=this.size/2,n=this.size/2-2;this.ctx.fillStyle="#000000",this.ctx.fillRect(0,0,this.size,this.size);for(let i=0;i<this.size;i++)for(let u=0;u<this.size;u++){const m=u-t,b=i-t,p=Math.sqrt(m*m+b*b);if(p<=n){const x=Math.atan2(b,m),c=Math.cos(x)*p/n,r=Math.sin(x)*p/n,W=1-p/n,N=o(c*e*.5,r*e*.5),g=o(c*e,r*e)*.5,d=o(c*e*2,r*e*2)*.25,R=o(c*e*4,r*e*4)*.125,z=o(c*e*8,r*e*8)*.0625,M=o(c*e*.25,r*e*.25)*.3,O=(N+g+d+R+z)/1.9375,w=o(c*e*16,r*e*16)*.05;let l=W+(O+w+M)*.5;for(const[T,a]of Object.entries(this.landTypes))if(l>=a.heightRange[0]&&l<a.heightRange[1]){const y=o(c*e*a.noiseScale,r*e*a.noiseScale)*a.noiseWeight*.2;l+=y;break}l=Math.max(0,Math.min(1,l));const v=this.getLandType(l);v&&(this.ctx.fillStyle=v.color,this.ctx.fillRect(u,i,1,1))}}const s=this.ctx.createRadialGradient(t,t,n*.8,t,t,n);s.addColorStop(0,"rgba(255, 255, 255, 0.1)"),s.addColorStop(1,"rgba(255, 255, 255, 0)"),this.ctx.fillStyle=s,this.ctx.fillRect(0,0,this.size,this.size)}}const H=document.getElementById("planetCanvas"),j=new D(H),B=document.getElementById("noiseScale"),K=document.getElementById("randomize");j.generate();K.addEventListener("click",()=>{j.generate(parseFloat(B.value))});B.addEventListener("input",h=>{j.generate(parseFloat(h.target.value))});
